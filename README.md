# UnicChat Enterprise - ĞšĞ¾Ñ€Ğ¿Ğ¾Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€

Ğ’ĞµÑ€ÑĞ¸Ñ: 2.1.85-beta.0  
Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ: v2.0  
Ğ”Ğ°Ñ‚Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ: 2026-01-23

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

- [ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ](#Ğ¾Ğ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ)
- [Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ](#ÑĞ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ-Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ)
- [Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚](#Ğ±Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹-ÑÑ‚Ğ°Ñ€Ñ‚)
- [ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°](#Ğ¿Ğ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ-ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°)
- [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
- [Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸](#ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ-ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸)
- [Troubleshooting](#troubleshooting)

---

## ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ

UnicChat Enterprise - ĞºĞ¾Ñ€Ğ¿Ğ¾Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ Ğ¼ĞµÑÑĞµĞ½Ğ´Ğ¶ĞµÑ€ Ğ´Ğ»Ñ Ğ±ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾Ğ³Ğ¾ Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ Ğ¸ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ğ½Ğ¾Ğ¹ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñ‹ Ñ Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ¾Ğ¹:

- ğŸ’¬ Ğ¢ĞµĞºÑÑ‚Ğ¾Ğ²Ñ‹Ğµ Ñ‡Ğ°Ñ‚Ñ‹ Ğ¸ ĞºĞ°Ğ½Ğ°Ğ»Ñ‹
- ğŸ“ ĞÑƒĞ´Ğ¸Ğ¾/Ğ²Ğ¸Ğ´ĞµĞ¾ Ğ·Ğ²Ğ¾Ğ½ĞºĞ¸
- ğŸ“„ Ğ¡Ğ¾Ğ²Ğ¼ĞµÑÑ‚Ğ½Ğ¾Ğµ Ñ€ĞµĞ´Ğ°ĞºÑ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ¾Ğ² (OnlyOffice)
- ğŸ“š Ğ‘Ğ°Ğ·Ğ° Ğ·Ğ½Ğ°Ğ½Ğ¸Ğ¹ (Knowledge Base)
- ğŸ” Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ² (Vault)
- ğŸ“¦ ĞĞ±ÑŠĞµĞºÑ‚Ğ½Ğ¾Ğµ Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ (MinIO S3)
- ğŸ”’ End-to-end ÑˆĞ¸Ñ„Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ

---

## Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

### ĞœĞ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (Ñ‚ĞµÑÑ‚Ğ¾Ğ²Ğ°Ñ ÑÑ€ĞµĞ´Ğ°)
- **CPU**: 2 ÑĞ´Ñ€Ğ°
- **RAM**: 4 GB (Ğ¼Ğ¸Ğ½Ğ¸Ğ¼ÑƒĞ¼ 2 GB + 2 GB swap)
- **Ğ”Ğ¸ÑĞº**: 40 GB SSD
- **ĞĞ¡**: Ubuntu 20.04/22.04 LTS
- **Docker**: 20.10+
- **Docker Compose**: 2.0+ (plugin) Ğ¸Ğ»Ğ¸ 1.29+ (standalone)

### Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒĞµĞ¼Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ (production)
- **CPU**: 4+ ÑĞ´Ñ€Ğ°
- **RAM**: 8+ GB
- **Ğ”Ğ¸ÑĞº**: 100+ GB SSD
- **ĞĞ¡**: Ubuntu 22.04 LTS
- **Docker**: 24.0+
- **Docker Compose**: 2.20+

### Ğ¡ĞµÑ‚ĞµĞ²Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
- ĞÑ‚ĞºÑ€Ñ‹Ñ‚Ñ‹Ğµ Ğ¿Ğ¾Ñ€Ñ‚Ñ‹: 80, 443, 27017 (MongoDB), 8200 (Vault)
- 3 DNS Ğ¸Ğ¼ĞµĞ½Ğ¸ (A-Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸):
  - `app.domain.com` - Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
  - `edt.domain.com` - DocumentServer (OnlyOffice)
  - `minio.domain.com` - MinIO S3

---

## Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### 1. ĞŸÑ€ĞµĞ´Ğ²Ğ°Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ‚Ñ€ĞµĞ±Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Docker
docker --version
docker compose version  # Ğ¸Ğ»Ğ¸ docker-compose --version

# Ğ•ÑĞ»Ğ¸ Docker Ğ½Ğµ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½ - ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚Ğµ:
# curl -fsSL https://get.docker.com | sh
# sudo usermod -aG docker $USER
```

### 2. ĞšĞ»Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ñ€ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ñ€Ğ¸Ñ

```bash
git clone <repository-url> unicchat.enterprise
cd unicchat.enterprise
```

### 3. ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

```bash
sudo ./unicchat.sh

# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ:
# [99] ğŸš€ Full automatic setup

# Ğ˜Ğ»Ğ¸ Ğ¿Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ¾:
# [2] Setup DNS names
# [3] Update MongoDB configuration
# [4] Update MinIO configuration
# [5] Prepare .env files
# [6] Login to Yandex registry
# [7] Create Docker network
# [8] Start UnicChat containers
# [9] Setup MongoDB users
# [10] Setup Vault secrets
```

### 4. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° SSL Ğ¸ Nginx

```bash
cd nginx
sudo ./generate_ssl.sh

# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ:
# [99] ğŸš€ ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ°Ğ²Ñ‚Ğ¾ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° (SSL + nginx)
```

### 5. ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker ps

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¾Ğ³Ğ¾Ğ²
docker logs unicchat.appserver
docker logs unicchat.nginx

# Ğ”Ğ¾ÑÑ‚ÑƒĞ¿ Ğº Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
# https://app.domain.com
```

---

## ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ğ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

### Ğ¨Ğ°Ğ³ 1: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° DNS Ğ¸Ğ¼ĞµĞ½

Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¸Ñ‚ 3 DNS Ğ¸Ğ¼ĞµĞ½Ğ¸ Ğ´Ğ»Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²:

```bash
sudo ./unicchat.sh
# Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [2] Setup DNS names

# Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ:
# - APP_DNS: app.domain.com (Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ)
# - EDT_DNS: edt.domain.com (DocumentServer)
# - MINIO_DNS: minio.domain.com (MinIO S3)
```

**Ğ’Ğ°Ğ¶Ğ½Ğ¾**: DNS Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ½Ğ°ÑÑ‚Ñ€Ğ¾ĞµĞ½Ñ‹ Ğ´Ğ¾ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸ SSL!

### Ğ¨Ğ°Ğ³ 2: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° MongoDB

```bash
# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [3] Update MongoDB configuration

# Ğ‘ÑƒĞ´ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑˆĞµĞ½Ğ¾:
# - MONGODB_ROOT_PASSWORD: Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ root Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
# - MONGODB_USERNAME: Ğ¸Ğ¼Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
# - MONGODB_PASSWORD: Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ñ
# - MONGODB_DATABASE: Ğ¸Ğ¼Ñ Ğ±Ğ°Ğ·Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: unicchat_db)

# Ğ”Ğ¾Ğ¿Ğ¾Ğ»Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ (Ğ´Ğ»Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²):
# - LOGGER_USER/PASSWORD/DB: Ğ´Ğ»Ñ ÑĞµÑ€Ğ²Ğ¸ÑĞ° Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ
# - VAULT_USER/PASSWORD/DB: Ğ´Ğ»Ñ Vault
```

### Ğ¨Ğ°Ğ³ 3: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° MinIO

```bash
# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [4] Update MinIO configuration

# Ğ‘ÑƒĞ´ĞµÑ‚ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑˆĞµĞ½Ğ¾:
# - MINIO_ROOT_USER: Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€ MinIO (Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ: minioadmin)
# - MINIO_ROOT_PASSWORD: Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑŒ Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¾Ñ€Ğ°
```

### Ğ¨Ğ°Ğ³ 4: Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²

```bash
# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [5] Prepare .env files

# Ğ¡ĞºÑ€Ğ¸Ğ¿Ñ‚ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚:
# âœ… mongo.env - ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ replica set
# âœ… mongo_creds.env - Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸ MongoDB
# âœ… logger_creds.env - MongoDB Ğ´Ğ»Ñ Logger
# âœ… vault_creds.env - MongoDB Ğ´Ğ»Ñ Vault
# âœ… appserver.env - Ğ¿ÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ AppServer
# âœ… appserver_creds.env - Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ AppServer
# âœ… logger.env - Logger API URL
# âœ… env/minio_env.env - MinIO credentials
# âœ… env/documentserver_env.env - DocumentServer config
```

### Ğ¨Ğ°Ğ³ 5: Ğ’Ñ…Ğ¾Ğ´ Ğ² Docker Registry

```bash
# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [6] Login to Yandex registry
# (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ñ‹Ğ¿Ğ¾Ğ»Ğ½ÑĞµÑ‚ÑÑ Ñ Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ñ‹Ğ¼ Ñ‚Ğ¾ĞºĞµĞ½Ğ¾Ğ¼)
```

### Ğ¨Ğ°Ğ³ 6: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Docker ÑĞµÑ‚Ğ¸

```bash
# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [7] Create Docker network
# Ğ¡Ğ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ ÑĞµÑ‚ÑŒ: unicchat-network
```

### Ğ¨Ğ°Ğ³ 7: Ğ—Ğ°Ğ¿ÑƒÑĞº ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²

```bash
# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [8] Start UnicChat containers

# ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°:
# 1. MongoDB (Ñ healthcheck)
# 2. Vault + Logger (Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾)
# 3. AppServer (Ğ¿Ğ¾ÑĞ»Ğµ Vault)
# 4. Tasker (Ğ¿Ğ¾ÑĞ»Ğµ AppServer + Logger)
# 5. MinIO + DocumentServer (Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾)
```

**Ğ’Ñ€ĞµĞ¼Ñ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°**: ~60-90 ÑĞµĞºÑƒĞ½Ğ´

### Ğ¨Ğ°Ğ³ 8: Ğ¡Ğ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹ MongoDB

```bash
# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [9] Setup MongoDB users

# ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°ÑÑ‚ÑÑ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ğ¸:
# - logger_user (Ğ´Ğ»Ñ Logger service)
# - vault_user (Ğ´Ğ»Ñ Vault service)
```

### Ğ¨Ğ°Ğ³ 9: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° Vault ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ²

```bash
# Ğ’ Ğ¼ĞµĞ½Ñ Ğ²Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [10] Setup Vault secrets

# ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ ÑĞµĞºÑ€ĞµÑ‚ KBTConfigs Ñ:
# - MongoDB connection string Ğ´Ğ»Ñ Logger
# - MinIO credentials (host, user, password)
```

### Ğ¨Ğ°Ğ³ 10: ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ° SSL Ğ¸ Nginx

```bash
cd nginx
sudo ./generate_ssl.sh

# ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ°Ñ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°:
# [99] ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ°Ğ²Ñ‚Ğ¾ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°

# Ğ˜Ğ»Ğ¸ Ğ¿Ğ¾ÑˆĞ°Ğ³Ğ¾Ğ²Ğ¾:
# [1] Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ² (Let's Encrypt)
# [2] Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ nginx
# [3] Ğ—Ğ°Ğ¿ÑƒÑĞº nginx
```

**Ğ’Ğ°Ğ¶Ğ½Ğ¾**: Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²:
- DNS Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸ Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ° IP ÑĞµÑ€Ğ²ĞµÑ€Ğ°
- ĞŸĞ¾Ñ€Ñ‚Ñ‹ 80 Ğ¸ 443 Ğ´Ğ¾Ğ»Ğ¶Ğ½Ñ‹ Ğ±Ñ‹Ñ‚ÑŒ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚Ñ‹
- Ğ¢Ñ€ĞµĞ±ÑƒĞµÑ‚ÑÑ email Ğ´Ğ»Ñ ÑƒĞ²ĞµĞ´Ğ¾Ğ¼Ğ»ĞµĞ½Ğ¸Ğ¹ Let's Encrypt

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### ĞšĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ñ‹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         Internet                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚   Nginx (SSL/TLS)    â”‚
              â”‚   Ports: 80, 443     â”‚
              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚               â”‚               â”‚
         â–¼               â–¼               â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  AppServer  â”‚  â”‚ DocumentSrv â”‚  â”‚    MinIO    â”‚
â”‚  Port 3000  â”‚  â”‚  Port 8880  â”‚  â”‚  Port 9000  â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚                â”‚                â”‚
       â”‚         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”        â”‚
       â”‚         â”‚             â”‚        â”‚
       â–¼         â–¼             â–¼        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           MongoDB (Replica Set)         â”‚
â”‚              Port 27017                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                  â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚          â”‚          â”‚
       â–¼          â–¼          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Vault   â”‚ â”‚ Logger â”‚ â”‚ Tasker â”‚
â”‚ Port 8200â”‚ â”‚Prt 8082â”‚ â”‚Prt 8881â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº Ğ·Ğ°Ğ¿ÑƒÑĞºĞ° ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²

```
1. MongoDB (Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¼, Ñ healthcheck)
   â†“
2. Vault + Logger (Ğ¿Ğ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾, Ğ¿Ğ¾ÑĞ»Ğµ MongoDB)
   â†“
3. AppServer (Ğ¿Ğ¾ÑĞ»Ğµ Vault)
   â†“
4. Tasker (Ğ¿Ğ¾ÑĞ»Ğµ AppServer + Logger)

ĞŸĞ°Ñ€Ğ°Ğ»Ğ»ĞµĞ»ÑŒĞ½Ğ¾ Ğ¸ Ğ½ĞµĞ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾:
- MinIO â†’ MinIO Init (ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ bucket)
- DocumentServer + RabbitMQ + PostgreSQL
```

### Ğ¡ĞµÑ€Ğ²Ğ¸ÑÑ‹

| Ğ¡ĞµÑ€Ğ²Ğ¸Ñ | ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€ | ĞŸĞ¾Ñ€Ñ‚ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|--------|-----------|------|----------|
| **AppServer** | unicchat.appserver | 3000 | ĞÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğµ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ |
| **MongoDB** | unicchat.mongodb | 27017 | Ğ‘Ğ°Ğ·Ğ° Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… (Replica Set) |
| **Vault** | unicchat.vault | 8200 | Ğ¥Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ ÑĞµĞºÑ€ĞµÑ‚Ğ¾Ğ² |
| **Logger** | unicchat.logger | 8082 | Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ |
| **Tasker** | unicchat.tasker | 8881 | Knowledge Base Ğ¸ Ğ·Ğ°Ğ´Ğ°Ñ‡Ğ¸ |
| **MinIO** | unicchat.minio | 9000, 9002 | S3-Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ¸Ñ‰Ğµ + Console |
| **DocumentServer** | unicchat.documentserver | 8880, 8443 | OnlyOffice |
| **Nginx** | unicchat.nginx | 80, 443 | Reverse proxy + SSL |
| **Certbot** | unicchat.certbot | - | ĞĞ²Ñ‚Ğ¾Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ SSL |

---

## Ğ£Ğ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ğ²Ğ¸ÑĞ°Ğ¼Ğ¸

### ĞÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ğµ ĞºĞ¾Ğ¼Ğ°Ğ½Ğ´Ñ‹

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑÑ‚Ğ°Ñ‚ÑƒÑĞ° Ğ²ÑĞµÑ… ĞºĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ğ¾Ğ²
docker ps --format "table {{.Names}}\t{{.Status}}\t{{.Ports}}"

# ĞŸÑ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ»Ğ¾Ğ³Ğ¾Ğ²
docker logs unicchat.appserver
docker logs unicchat.mongodb
docker logs unicchat.vault
docker logs unicchat.nginx

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº ÑĞµÑ€Ğ²Ğ¸ÑĞ°
docker restart unicchat.appserver

# ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
cd multi-server-install
docker compose down

# Ğ—Ğ°Ğ¿ÑƒÑĞº Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
docker compose up -d

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° healthcheck
docker inspect unicchat.mongodb | grep -A 5 Health
docker inspect unicchat.minio | grep -A 5 Health
docker inspect unicchat.nginx | grep -A 5 Health
```

### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼ĞµĞ½Ñ unicchat.sh

```bash
sudo ./unicchat.sh

# Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ¾Ğ¿Ñ†Ğ¸Ğ¸:
[1]  Check AVX support
[2]  Setup DNS names for services (APP, EDT, MinIO)
[3]  Update MongoDB configuration
[4]  Update MinIO configuration
[5]  Prepare .env files
[6]  Login to Yandex registry
[7]  Create Docker network
[8]  Start UnicChat containers
[9]  Setup MongoDB users (separate DB per service)
[10] Setup Vault secrets for KBT service
[11] Restart all services
[99] ğŸš€ Full automatic setup
[100] ğŸ—‘ï¸ Cleanup (remove containers & volumes)
[0]  Exit
```

### Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ¼ĞµĞ½Ñ nginx/generate_ssl.sh

```bash
cd nginx
sudo ./generate_ssl.sh

# Ğ”Ğ¾ÑÑ‚ÑƒĞ¿Ğ½Ñ‹Ğµ Ğ¾Ğ¿Ñ†Ğ¸Ğ¸:
[1] ğŸ” Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ² (Let's Encrypt)
[2] ğŸ“ Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ/Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ nginx
[3] ğŸŒ Ğ—Ğ°Ğ¿ÑƒÑĞº nginx
[4] ğŸ›‘ ĞÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° nginx
[5] ğŸ”„ ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº nginx
[6] ğŸ“Š Ğ¡Ñ‚Ğ°Ñ‚ÑƒÑ ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
[7] ğŸ“‹ Ğ›Ğ¾Ğ³Ğ¸ nginx
[8] ğŸ” ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ nginx
[99] ğŸš€ ĞŸĞ¾Ğ»Ğ½Ğ°Ñ Ğ°Ğ²Ñ‚Ğ¾ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° (SSL + nginx)
[0] ğŸšª Ğ’Ñ‹Ñ…Ğ¾Ğ´
```

---

## Troubleshooting

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞšĞ¾Ğ½Ñ‚ĞµĞ¹Ğ½ĞµÑ€Ñ‹ Ğ½Ğµ Ğ·Ğ°Ğ¿ÑƒÑĞºĞ°ÑÑ‚ÑÑ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¾Ğ³Ğ¾Ğ² Docker
docker logs <container_name>

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° ÑĞµÑ‚Ğ¸
docker network inspect unicchat-network

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ²
ss -tuln | grep -E ':(80|443|27017|8200)'

# ĞŸĞµÑ€ĞµĞ·Ğ°Ğ¿ÑƒÑĞº Docker
sudo systemctl restart docker
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: MongoDB Ğ½Ğµ Ğ³Ğ¾Ñ‚Ğ¾Ğ²

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° healthcheck
docker inspect unicchat.mongodb | grep -A 10 Health

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¾Ğ³Ğ¾Ğ²
docker logs unicchat.mongodb

# ĞŸĞ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ğº MongoDB
docker exec -it unicchat.mongodb mongosh -u root -p <password>
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Vault Ğ½Ğµ Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡Ğ°ĞµÑ‚ÑÑ Ğº MongoDB

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° vault_creds.env
cat multi-server-install/vault_creds.env

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¾Ğ³Ğ¾Ğ² Vault
docker logs unicchat.vault

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ğ´ĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ñ
docker exec unicchat.vault bash -c "curl -s http://localhost:80/health"
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹ Ğ½Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ÑÑ‚ÑÑ

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° DNS
dig app.domain.com
dig edt.domain.com
dig minio.domain.com

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ² 80/443
sudo ss -tuln | grep -E ':(80|443)'

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ»Ğ¾Ğ³Ğ¾Ğ² Certbot
docker logs unicchat.certbot

# Ğ ÑƒÑ‡Ğ½Ğ¾Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²
cd nginx
sudo ./generate_ssl.sh
# Ğ’Ñ‹Ğ±ĞµÑ€Ğ¸Ñ‚Ğµ [1] Ğ“ĞµĞ½ĞµÑ€Ğ°Ñ†Ğ¸Ñ SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: ĞĞµĞ´Ğ¾ÑÑ‚Ğ°Ñ‚Ğ¾Ñ‡Ğ½Ğ¾ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ°Ğ¼ÑÑ‚Ğ¸
free -h
docker stats --no-stream

# ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Docker
docker system prune -a

# Ğ”Ğ¾Ğ±Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ğµ swap (ĞµÑĞ»Ğ¸ Ğ½ÑƒĞ¶Ğ½Ğ¾)
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

### ĞŸÑ€Ğ¾Ğ±Ğ»ĞµĞ¼Ğ°: Ğ”Ğ¸ÑĞº Ğ·Ğ°Ğ¿Ğ¾Ğ»Ğ½ĞµĞ½

```bash
# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ´Ğ¸ÑĞºĞ°
df -h

# ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Docker volumes
docker volume prune

# ĞÑ‡Ğ¸ÑÑ‚ĞºĞ° Ğ»Ğ¾Ğ³Ğ¾Ğ²
sudo journalctl --vacuum-time=7d

# ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ±Ğ¾Ğ»ÑŒÑˆĞ¸Ñ… Ñ„Ğ°Ğ¹Ğ»Ğ¾Ğ²
sudo du -sh /var/lib/docker/*
```

---

## Ğ¤Ğ°Ğ¹Ğ»Ñ‹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

### Ğ“ĞµĞ½ĞµÑ€Ğ¸Ñ€ÑƒĞµĞ¼Ñ‹Ğµ Ñ„Ğ°Ğ¹Ğ»Ñ‹ (Ğ¸ÑĞºĞ»ÑÑ‡ĞµĞ½Ñ‹ Ğ¸Ğ· git)

```
multi-server-install/
â”œâ”€â”€ mongo.env              # ĞšĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ replica set
â”œâ”€â”€ mongo_creds.env        # ĞŸĞ°Ñ€Ğ¾Ğ»Ğ¸ MongoDB (SENSITIVE)
â”œâ”€â”€ logger_creds.env       # MongoDB Ğ´Ğ»Ñ Logger (SENSITIVE)
â”œâ”€â”€ vault_creds.env        # MongoDB Ğ´Ğ»Ñ Vault (SENSITIVE)
â”œâ”€â”€ appserver.env          # ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ğ°Ñ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ AppServer
â”œâ”€â”€ appserver_creds.env    # Credentials AppServer (SENSITIVE)
â”œâ”€â”€ logger.env             # Logger API URL
â””â”€â”€ env/
    â”œâ”€â”€ minio_env.env      # MinIO credentials (SENSITIVE)
    â””â”€â”€ documentserver_env.env  # DocumentServer config

dns_config.txt             # DNS Ğ¸Ğ¼ĞµĞ½Ğ° (SENSITIVE)
mongo_config.txt           # MongoDB config (SENSITIVE)
minio_config.txt           # MinIO config (SENSITIVE)
unicchat_config.txt        # Email Ğ´Ğ»Ñ SSL (SENSITIVE)
```

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¾ĞµĞºÑ‚Ğ°

```
unicchat.enterprise/
â”œâ”€â”€ unicchat.sh                    # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ ÑĞºÑ€Ğ¸Ğ¿Ñ‚ ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ¸
â”œâ”€â”€ README.md                      # Ğ­Ñ‚Ğ° Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ
â”œâ”€â”€ .gitignore                     # Ğ˜ÑĞºĞ»ÑÑ‡ĞµĞ½Ğ¸Ğµ Ñ‡ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
â”œâ”€â”€ multi-server-install/
â”‚   â”œâ”€â”€ docker-compose.yml         # Ğ•Ğ´Ğ¸Ğ½Ñ‹Ğ¹ compose Ğ´Ğ»Ñ Ğ²ÑĞµÑ… ÑĞµÑ€Ğ²Ğ¸ÑĞ¾Ğ²
â”‚   â”œâ”€â”€ appserver.env.example      # ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸
â”‚   â””â”€â”€ services/                  # ĞÑ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ğµ compose Ñ„Ğ°Ğ¹Ğ»Ñ‹
â”‚       â”œâ”€â”€ mongodb.yml
â”‚       â”œâ”€â”€ vault.yml
â”‚       â”œâ”€â”€ appserver.yml
â”‚       â”œâ”€â”€ logger.yml
â”‚       â”œâ”€â”€ tasker.yml
â”‚       â”œâ”€â”€ minio.yml
â”‚       â”œâ”€â”€ documentserver.yml
â”‚       â””â”€â”€ README.md
â””â”€â”€ nginx/
    â”œâ”€â”€ generate_ssl.sh            # SSL Ğ¸ Nginx Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
    â”œâ”€â”€ docker-compose.yml         # Nginx + Certbot
    â”œâ”€â”€ .gitignore
    â””â”€â”€ README.md
```

---

## Ğ‘ĞµĞ·Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚ÑŒ

### Ğ§ÑƒĞ²ÑÑ‚Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ

**ĞĞ• ĞºĞ¾Ğ¼Ğ¼Ğ¸Ñ‚Ğ¸Ñ‚ÑŒ Ğ² git:**
- `*_creds.env` - Ñ„Ğ°Ğ¹Ğ»Ñ‹ Ñ Ğ¿Ğ°Ñ€Ğ¾Ğ»ÑĞ¼Ğ¸
- `*.env` (ĞºÑ€Ğ¾Ğ¼Ğµ `*.env.example`)
- `dns_config.txt`, `mongo_config.txt`, `minio_config.txt`
- `nginx/ssl/` - SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹
- `nginx/config/` - ÑĞ³ĞµĞ½ĞµÑ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸

### Ğ ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´Ğ°Ñ†Ğ¸Ğ¸

1. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ ÑĞ¸Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ğ°Ñ€Ğ¾Ğ»Ğ¸** Ğ´Ğ»Ñ MongoDB, MinIO, Vault
2. **Ğ ĞµĞ³ÑƒĞ»ÑÑ€Ğ½Ğ¾ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ÑĞ¹Ñ‚Ğµ** SSL ÑĞµÑ€Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ñ‹ (Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ñ‡ĞµÑ€ĞµĞ· Certbot)
3. **Ğ”ĞµĞ»Ğ°Ğ¹Ñ‚Ğµ backup** MongoDB Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…
4. **ĞĞ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ÑŒÑ‚Ğµ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿** Ğº Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ğ¼ Ñ‡ĞµÑ€ĞµĞ· firewall
5. **Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ VPN** Ğ´Ğ»Ñ Ğ´Ğ¾ÑÑ‚ÑƒĞ¿Ğ° Ğº Ğ°Ğ´Ğ¼Ğ¸Ğ½Ğ¸ÑÑ‚Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¼ Ğ¿Ğ¾Ñ€Ñ‚Ğ°Ğ¼

---

## ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°

- **Email**: support@unic.chat
- **Ğ”Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°Ñ†Ğ¸Ñ**: [docs.unic.chat](https://docs.unic.chat)
- **Issues**: [GitHub Issues](https://github.com/unicchat/enterprise/issues)

---

## Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

UnicChat Enterprise - Ğ¿Ñ€Ğ¾Ğ¿Ñ€Ğ¸ĞµÑ‚Ğ°Ñ€Ğ½Ğ¾Ğµ ĞŸĞ.  
Ğ”Ğ»Ñ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ñ Ğ»Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ğ¸ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ¸Ñ‚ĞµÑÑŒ: license@unic.chat

---

**Ğ’ĞµÑ€ÑĞ¸Ñ Ğ´Ğ¾ĞºÑƒĞ¼ĞµĞ½Ñ‚Ğ°**: 2.0  
**Ğ”Ğ°Ñ‚Ğ° Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ**: 2026-01-23  
**ĞĞ²Ñ‚Ğ¾Ñ€**: UnicChat Team
