# Nginx + Let's Encrypt SSL

–ü—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ nginx —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞–º–∏ —á–µ—Ä–µ–∑ Let's Encrypt.

## üìã –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã —É–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É –≤–∞—Å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ:

- **Docker** (–≤–µ—Ä—Å–∏—è 20.10 –∏–ª–∏ –≤—ã—à–µ)
- **Docker Compose** (–≤–µ—Ä—Å–∏—è 2.0 –∏–ª–∏ –≤—ã—à–µ, –∏–ª–∏ docker-compose 1.29+)
- **–ü—Ä–∞–≤–∞ root** –∏–ª–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≤—ã–ø–æ–ª–Ω—è—Ç—å –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ `sudo`
- **–î–æ–º–µ–Ω**, –∫–æ—Ç–æ—Ä—ã–π —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
- **–û—Ç–∫—Ä—ã—Ç—ã–µ –ø–æ—Ä—Ç—ã 80 –∏ 443** –≤ firewall

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Docker

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Docker
docker --version

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å Docker Compose
docker compose version
# –∏–ª–∏
docker-compose --version
```

–ï—Å–ª–∏ Docker –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω, —É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –µ–≥–æ —Å–æ–≥–ª–∞—Å–Ω–æ [–æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏](https://docs.docker.com/engine/install/ubuntu/).

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
nginx/
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ generate_ssl.sh             # –°–∫—Ä–∏–ø—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è SSL –∏ nginx
‚îú‚îÄ‚îÄ .gitignore                  # –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º—ã–µ —Ñ–∞–π–ª—ã (ssl, www, logs)
‚îú‚îÄ‚îÄ README.md                   # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îú‚îÄ‚îÄ nginx.conf.template     # –®–∞–±–ª–æ–Ω –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx (—Å SSL)
‚îÇ   ‚îî‚îÄ‚îÄ nginx-init.conf         # –í—Ä–µ–º–µ–Ω–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–±–µ–∑ SSL)
‚îú‚îÄ‚îÄ ssl/                        # SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ www/                        # Challenge —Ñ–∞–π–ª—ã –¥–ª—è Let's Encrypt (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
```

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –®–∞–≥ 1: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞

–í—ã–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—É:

```bash
cd /path/to/unicchat/nginx
chmod +x generate_ssl.sh
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–æ–º–µ–Ω–∞

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª `unicchat_config.txt` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ (–Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `nginx/`):

```bash
cd /path/to/unicchat
cat unicchat_config.txt
```

–§–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å:
```
DOMAIN=yourdomain.com
EMAIL=your@email.com
```

**–í–∞–∂–Ω–æ:**
- –ó–∞–º–µ–Ω–∏—Ç–µ `yourdomain.com` –Ω–∞ –≤–∞—à —Ä–µ–∞–ª—å–Ω—ã–π –¥–æ–º–µ–Ω
- –ó–∞–º–µ–Ω–∏—Ç–µ `your@email.com` –Ω–∞ –≤–∞—à email (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Let's Encrypt –¥–ª—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π)
- **EMAIL –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω** - –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ —Ñ–∞–π–ª, –µ—Å–ª–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP-–∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞:
  ```bash
  dig yourdomain.com +short
  ```

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ upstream —Å–µ—Ä–≤–µ—Ä–∞

**–í–ê–ñ–ù–û:** –°–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ –ü–ï–†–ï–î –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π SSL!

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `config/nginx.conf.template` –∏ –∏–∑–º–µ–Ω–∏—Ç–µ –∞–¥—Ä–µ—Å upstream —Å–µ—Ä–≤–µ—Ä–∞:

```nginx
upstream internal {
    server 127.0.0.1:8080;  # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –∞–¥—Ä–µ—Å –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
}
```

–¢–∞–∫–∂–µ –æ–±–Ω–æ–≤–∏—Ç–µ `config/nginx-init.conf` (–¥–æ–ª–∂–Ω–æ —Å–æ–≤–ø–∞–¥–∞—Ç—å —Å –æ—Å–Ω–æ–≤–Ω—ã–º —à–∞–±–ª–æ–Ω–æ–º).

**–ü—Ä–∏–º–µ—Ä—ã upstream:**
- –õ–æ–∫–∞–ª—å–Ω—ã–π —Å–µ—Ä–≤–µ—Ä: `server 127.0.0.1:8080;`
- Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä: `server app-container:8080;`
- –í–Ω–µ—à–Ω–∏–π —Å–µ—Ä–≤–µ—Ä: `server 192.168.1.100:8080;`

### –®–∞–≥ 4: –ù–∞—Å—Ç—Ä–æ–π–∫–∞ firewall

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã 80 –∏ 443 –æ—Ç–∫—Ä—ã—Ç—ã:

```bash
# –î–ª—è UFW
sudo ufw allow 80/tcp
sudo ufw allow 443/tcp
sudo ufw reload

# –ü—Ä–æ–≤–µ—Ä–∫–∞
sudo ufw status
```

### –®–∞–≥ 5: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–∞–≤–∞–º–∏ root:

```bash
cd /path/to/unicchat/nginx
sudo ./generate_ssl.sh
```

–í –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é **[1] üîê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (Let's Encrypt)**

–°–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–ø–æ–ª–Ω–∏—Ç:
1. ‚úÖ –û—Å—Ç–∞–Ω–æ–≤–∏—Ç nginx (–µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω) - –æ—Å–≤–æ–±–æ–¥–∏—Ç –ø–æ—Ä—Ç 80
2. ‚úÖ –ü–æ–ª—É—á–∏—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç —á–µ—Ä–µ–∑ Let's Encrypt (standalone —Ä–µ–∂–∏–º)
3. ‚úÖ –û–±–Ω–æ–≤–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é nginx —Å –≤–∞—à–∏–º –¥–æ–º–µ–Ω–æ–º
4. ‚úÖ –ó–∞–ø—É—Å—Ç–∏—Ç nginx —Å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º

### –®–∞–≥ 6: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å nginx
curl -I https://yourdomain.com

# –ò–ª–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä
# –û—Ç–∫—Ä–æ–π—Ç–µ https://yourdomain.com
```

## üìñ –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ

### –ú–µ–Ω—é —Å–∫—Ä–∏–ø—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ `sudo ./generate_ssl.sh` –¥–æ—Å—Ç—É–ø–Ω—ã —Å–ª–µ–¥—É—é—â–∏–µ –æ–ø—Ü–∏–∏:

- **[1] üîê –ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞** - –ü–æ–ª—É—á–∏—Ç—å –Ω–æ–≤—ã–π SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –æ—Ç Let's Encrypt
- **[2] üìù –ì–µ–Ω–µ—Ä–∞—Ü–∏—è/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx** - –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–∑ —à–∞–±–ª–æ–Ω–∞
- **[3] üåê –ó–∞–ø—É—Å–∫ nginx** - –ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä nginx
- **[4] üõë –û—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx** - –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä nginx
- **[5] üîÑ –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ nginx** - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä nginx
- **[6] üìä –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤** - –ü–æ–∫–∞–∑–∞—Ç—å —Å—Ç–∞—Ç—É—Å nginx, certbot –∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
- **[7] üìã –õ–æ–≥–∏ nginx** - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ nginx
- **[8] üìã –õ–æ–≥–∏ certbot** - –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –ª–æ–≥–∏ certbot
- **[9] üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ nginx** - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- **[0] üö™ –í—ã—Ö–æ–¥** - –í—ã–π—Ç–∏ –∏–∑ –º–µ–Ω—é

### –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ (–ø–æ—à–∞–≥–æ–≤–æ)

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —à–∞–≥–∏ –≤—Ä—É—á–Ω—É—é:

1. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ upstream** –≤ `config/nginx.conf.template` –∏ `config/nginx-init.conf`

2. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** (–æ–ø—Ü–∏—è 2 –≤ –º–µ–Ω—é):
   ```bash
   sudo ./generate_ssl.sh
   # –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 2
   ```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ nginx** (–æ–ø—Ü–∏—è 3 –≤ –º–µ–Ω—é):
   ```bash
   sudo ./generate_ssl.sh
   # –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 3
   ```

4. **–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç** (–æ–ø—Ü–∏—è 1 –≤ –º–µ–Ω—é):
   ```bash
   sudo ./generate_ssl.sh
   # –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 1
   ```

## üîÑ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤

Certbot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∫–∞–∂–¥—ã–µ 12 —á–∞—Å–æ–≤ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä `unicchat.certbot`.

–°–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let's Encrypt –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã 90 –¥–Ω–µ–π –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞ 30 –¥–Ω–µ–π –¥–æ –∏—Å—Ç–µ—á–µ–Ω–∏—è.

## üîß Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ—Ä—Ç 80 –∑–∞–Ω—è—Ç

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø–æ—Ä—Ç 80
sudo ss -tulpn | grep :80
# –∏–ª–∏
sudo netstat -tulpn | grep :80

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å nginx –µ—Å–ª–∏ –∑–∞–ø—É—â–µ–Ω
sudo ./generate_ssl.sh
# –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 4 (–û—Å—Ç–∞–Ω–æ–≤–∫–∞ nginx)
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ù–µ —É–¥–∞–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:

1. **–î–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞:**
   ```bash
   dig yourdomain.com +short
   # –î–æ–ª–∂–µ–Ω –≤–µ—Ä–Ω—É—Ç—å IP –≤–∞—à–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞
   ```

2. **–ü–æ—Ä—Ç 80 –¥–æ—Å—Ç—É–ø–µ–Ω –∏–∑–≤–Ω–µ:**
   ```bash
   # –° –¥—Ä—É–≥–æ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞
   curl http://yourdomain.com
   ```

3. **Firewall –æ—Ç–∫—Ä—ã—Ç:**
   ```bash
   sudo ufw status
   sudo ufw allow 80/tcp
   sudo ufw allow 443/tcp
   ```

4. **Cloud provider firewall/security groups:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö –≤–∞—à–µ–≥–æ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞ –æ—Ç–∫—Ä—ã—Ç—ã –ø–æ—Ä—Ç—ã 80 –∏ 443

### –ü—Ä–æ–±–ª–µ–º–∞: Nginx –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏
sudo ./generate_ssl.sh
# –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 7 (–õ–æ–≥–∏ nginx)

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo ./generate_ssl.sh
# –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 9 (–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏)
```

### –ü—Ä–æ–±–ª–µ–º–∞: SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç –Ω–µ –Ω–∞–π–¥–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤
ls -la ssl/live/yourdomain.com/

# –ï—Å–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–≤ –Ω–µ—Ç, —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –∑–∞–Ω–æ–≤–æ
sudo ./generate_ssl.sh
# –í—ã–±–µ—Ä–∏—Ç–µ –æ–ø—Ü–∏—é 1 (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞)
```

### –ü—Ä–æ–±–ª–µ–º–∞: Permission denied –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞

```bash
# –í—ã–¥–∞—Ç—å –ø—Ä–∞–≤–∞ –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
chmod +x generate_ssl.sh

# –ó–∞–ø—É—Å–∫–∞—Ç—å —Å sudo
sudo ./generate_ssl.sh
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

```bash
# –õ–æ–≥–∏ nginx
docker logs unicchat.nginx

# –õ–æ–≥–∏ certbot
docker logs unicchat.certbot

# –ò–ª–∏ —á–µ—Ä–µ–∑ –º–µ–Ω—é —Å–∫—Ä–∏–ø—Ç–∞ (–æ–ø—Ü–∏–∏ 7 –∏ 8)
```

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–§–∞–π–ª `unicchat_config.txt`** –¥–æ–ª–∂–µ–Ω –Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –Ω–∞ —É—Ä–æ–≤–µ–Ω—å –≤—ã—à–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `nginx/` (–≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞)

2. **SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã** —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `nginx/ssl/` –∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è nginx** –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–∑ —à–∞–±–ª–æ–Ω–∞ `config/nginx.conf.template` —Å –ø–æ–¥—Å—Ç–∞–Ω–æ–≤–∫–æ–π –¥–æ–º–µ–Ω–∞

4. **–ü–æ—Ä—Ç 80** –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–≤–æ–±–æ–¥–µ–Ω –≤–æ –≤—Ä–µ–º—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (—Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç nginx)

5. **Docker —Å–µ—Ç—å** `unicchat-network` —Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ

## üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –§–∞–π–ª `unicchat_config.txt` —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –∏ –Ω–µ –¥–æ–ª–∂–µ–Ω –ø–æ–ø–∞–¥–∞—Ç—å –≤ git (–¥–æ–±–∞–≤–ª–µ–Ω –≤ `.gitignore`)
- SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã –∏ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ `ssl/` –∏ –Ω–µ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã –ø—É–±–ª–∏—á–Ω–æ
- –°–∫—Ä–∏–ø—Ç —Ç—Ä–µ–±—É–µ—Ç –ø—Ä–∞–≤–∞ root –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Docker –∏ —Å–∏—Å—Ç–µ–º–Ω—ã–º–∏ –ø–æ—Ä—Ç–∞–º–∏

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Nginx](https://nginx.org/ru/docs/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Let's Encrypt](https://letsencrypt.org/docs/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Certbot](https://eff-certbot.readthedocs.io/)
- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Docker](https://docs.docker.com/)
