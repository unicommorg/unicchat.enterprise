## 1. Убедитесь, что произвели клонирование репозитория:



   ``` bash
   git clone https://github.com/rightsoftware-ru/unicnet.enterprise.git
   cd unicnet.enterprise
   ```

## 2. Перейдите в директорию vcs.unic.chat.template

   ``` bash
   cd vcs.unic.chat.template
   ```

## 3. Определите, как планируете использовать ВКС сервер:

   ### 3.1 Установка ВКС сервера для использования в закрытом контуре:
   
   Запустить `./install_server_local.sh`. Перед запуском убедитесь, что в директории, где запускается скрипт, есть файл `local.env`. Сервер будет установлен в текущей директории.
   
   ``` bash
   ./install_server_local.sh
   ```

   #### 3.1.1 В файле `local.env` указать домен и ip адрес, на которых будет работать ВКС сервер.
   
   #### 3.1.2 По окончании установки необходимо установить выпущенный сертификат на клиентское устройство, в связи с использованием самоподписанного сертификата.

   ### 3.2 Установка ВКС сервера с доступом из интернета:
   
   Запустить `./install_server.sh` (возможно, на последнюю операцию в файле нужно `sudo`). Перед запуском убедитесь, что в директории, где запускается скрипт, есть файл `.env`. Сервер будет установлен в текущей директории.
   
   ``` bash
   ./install_server.sh
   ```

   #### 3.2.1 В файле `.env` указать домены, на которых будет работать ВКС сервер.

4. Если на сервере отсутствует docker, то выполнить скрипт под `sudo`:

   ``` bash
   sudo ./install_docker.sh
   ```
   
   (только для Ubuntu) или иным способом установить docker + compose

5. Можно не использовать caddy, вместо этого использовать nginx. Конфигурация сайтов в файле `example.sites.nginx.md`. На домены нужны HTTPS сертификаты.

#### Проверка открытия портов для варианта установки с внешним доступом:

``` bash
sudo lsof -i:7880 -i:7881 -i:5349 -i:3478 -i:50879 -i:54655 -i:59763
```

Пример вывода:
```
COMMAND    PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
livekit-s 5780 root    8u  IPv6  69483      0t0  TCP *:7881 (LISTEN)
livekit-s 5780 root    9u  IPv4  69493      0t0  TCP *:5349 (LISTEN)
livekit-s 5780 root   10u  IPv4  69494      0t0  UDP *:3478
livekit-s 5780 root   11u  IPv6  70260      0t0  TCP *:7880 (LISTEN)
```

``` bash
telnet <internal_IP> 7880  # проверить порты 7880, 7881, 5349
```





